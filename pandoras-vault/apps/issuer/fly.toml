# Fly.io Deployment Configuration
#
# Purpose: Configuration for deploying issuer backend to Fly.io
#
# Contains:
# - App name and region
# - Build configuration (Dockerfile)
# - Environment variables
# - Service ports
# - Health checks
# - Scaling settings
#
# Configuration:
#
app = "pandoras-vault-issuer"
primary_region = "sjc" # San Jose or nearest region
#
[build]
  dockerfile = "Dockerfile"
#
[env]
  PORT = "8080"
  NODE_ENV = "production"
#
[http_service]
  internal_port = 8080
  force_https = true
  auto_stop_machines = true
  auto_start_machines = true
  min_machines_running = 1
#
[[http_service.checks]]
  grace_period = "10s"
  interval = "30s"
  method = "GET"
  timeout = "5s"
  path = "/health"
#
[vm]
  cpu_kind = "shared"
  cpus = 1
  memory_mb = 512
#
# Secrets (set via fly secrets set):
# - DATABASE_URL
# - ISSUER_PRIVATE_KEY
# - PINATA_API_KEY
# - PINATA_SECRET_KEY
# - BLOCKCHAIN_RPC_URL
#
# Deploy:
# fly deploy
# fly secrets set DATABASE_URL=...
